(function(){"use strict";var r=function(){var r="abcdefghijklmnoprstuvwy",n=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],t={horizontal:function(r,n,t){return{x:r+t,y:n}},horizontalBack:function(r,n,t){return{x:r-t,y:n}},vertical:function(r,n,t){return{x:r,y:n+t}},verticalUp:function(r,n,t){return{x:r,y:n-t}},diagonal:function(r,n,t){return{x:r+t,y:n+t}},diagonalBack:function(r,n,t){return{x:r-t,y:n+t}},diagonalUp:function(r,n,t){return{x:r+t,y:n-t}},diagonalUpBack:function(r,n,t){return{x:r-t,y:n-t}}},o={horizontal:function(r,n,t,o,e){return o>=r+e},horizontalBack:function(r,n,t,o,e){return r+1>=e},vertical:function(r,n,t,o,e){return t>=n+e},verticalUp:function(r,n,t,o,e){return n+1>=e},diagonal:function(r,n,t,o,e){return o>=r+e&&t>=n+e},diagonalBack:function(r,n,t,o,e){return r+1>=e&&t>=n+e},diagonalUp:function(r,n,t,o,e){return o>=r+e&&n+1>=e},diagonalUpBack:function(r,n,t,o,e){return r+1>=e&&n+1>=e}},e={horizontal:function(r,n,t){return{x:0,y:n+1}},horizontalBack:function(r,n,t){return{x:t-1,y:n}},vertical:function(r,n,t){return{x:0,y:n+100}},verticalUp:function(r,n,t){return{x:0,y:t-1}},diagonal:function(r,n,t){return{x:0,y:n+1}},diagonalBack:function(r,n,t){return{x:t-1,y:r>=t-1?n+1:n}},diagonalUp:function(r,n,t){return{x:0,y:t-1>n?t-1:n+1}},diagonalUpBack:function(r,n,t){return{x:t-1,y:r>=t-1?n+1:n}}},i=function(r,n){var t,o,e,i=[];for(t=0;t<n.height;t++)for(i.push([]),o=0;o<n.width;o++)i[t].push("");for(t=0,e=r.length;e>t;t++)if(!a(i,n,r[t]))return null;return i},a=function(r,n,o){var e=l(r,n,o);if(0===e.length)return!1;var i=e[Math.floor(Math.random()*e.length)];return c(r,o,i.x,i.y,t[i.orientation]),!0},l=function(r,n,i){for(var a=[],l=n.height,c=n.width,s=i.length,d=0,g=0,v=n.orientations.length;v>g;g++)for(var p=n.orientations[g],w=o[p],x=t[p],k=e[p],y=0,B=0;l>B;)if(w(y,B,l,c,s)){var z=f(i,r,y,B,x);(z>=d||!n.preferOverlap&&z>-1)&&(d=z,a.push({x:y,y:B,orientation:p,overlap:z})),y++,y>=c&&(y=0,B++)}else{var m=k(y,B,s);y=m.x,B=m.y}return n.preferOverlap?h(a,d):u(a)},u=function(r){for(var n=[],t=0,o=r.length;o>t;t++)0===r[t].overlap&&n.push(r[t]);return n},f=function(r,n,t,o,e){for(var i=0,a=0,l=r.length;l>a;a++){var u=e(t,o,a),f=n[u.y][u.x];if(f===r[a])i++;else if(""!==f)return-1}return i},h=function(r,n){for(var t=[],o=0,e=r.length;e>o;o++)r[o].overlap>=n&&t.push(r[o]);return t},c=function(r,n,t,o,e){for(var i=0,a=n.length;a>i;i++){var l=e(t,o,i);r[l.y][l.x]=n[i]}};return{validOrientations:n,orientations:t,newPuzzle:function(t,o){if(!t.length)throw new Error("Zero words provided");var e,a,l=0,u=0,f=o||{};e=t.slice(0).sort();for(var h=e[0].length,c={height:f.height||h,width:f.width||h,orientations:f.orientations||n,fillBlanks:void 0!==f.fillBlanks?f.fillBlanks:!0,allowExtraBlanks:void 0!==f.allowExtraBlanks?f.allowExtraBlanks:!0,maxAttempts:f.maxAttempts||3,maxGridGrowth:void 0!==f.maxGridGrowth?f.maxGridGrowth:10,preferOverlap:void 0!==f.preferOverlap?f.preferOverlap:!0};!a;){for(;!a&&l++<c.maxAttempts;)a=i(e,c);if(!a){if(u++,u>c.maxGridGrowth)throw new Error("No valid "+c.width+"x"+c.height+" grid found and not allowed to grow more");console.log("No valid "+c.width+"x"+c.height+" grid found after "+(l-1)+" attempts, trying with bigger grid"),c.height++,c.width++,l=0}}if(c.fillBlanks){var s,d,g=0;"function"==typeof c.fillBlanks?d=c.fillBlanks:"string"==typeof c.fillBlanks?(s=c.fillBlanks.toLowerCase().split(""),d=function(){return s.pop()||g++&&""}):d=function(){return r[Math.floor(Math.random()*r.length)]};var v=this.fillBlanks({puzzle:a,extraLetterGenerator:d});if(s&&s.length)throw new Error("Some extra letters provided were not used: "+s);if(s&&g&&!c.allowExtraBlanks)throw new Error(g+" extra letters were missing to fill the grid");var p=100*(1-v/(c.width*c.height));console.log("Blanks filled with "+v+" random letters - Final grid is filled at "+p.toFixed(0)+"%")}return a},newPuzzleLax:function(r,n){try{return this.newPuzzle(r,n)}catch(t){if(!n.allowedMissingWords)throw t;var n=Object.assign({},n);n.allowedMissingWords--;for(var o=0;o<r.length;o++){var e=r.slice(0);e.splice(o,1);try{var i=this.newPuzzleLax(e,n);return console.log('Solution found without word "'+r[o]+'"'),i}catch(t){}}throw t}},fillBlanks:function(r){for(var n=r.puzzle,t=r.extraLetterGenerator,o=0,e=0,i=n.length;i>e;e++)for(var a=n[e],l=0,u=a.length;u>l;l++)n[e][l]||(n[e][l]=t(),o++);return o},solve:function(r,t){for(var o={height:r.length,width:r[0].length,orientations:n,preferOverlap:!0},e=[],i=[],a=0,u=t.length;u>a;a++){var f=t[a],h=l(r,o,f);h.length>0&&h[0].overlap===f.length?(h[0].word=f,e.push(h[0])):i.push(f)}return{found:e,notFound:i}},print:function(r){for(var n="",t=0,o=r.length;o>t;t++){for(var e=r[t],i=0,a=e.length;a>i;i++)n+=(""===e[i]?" ":e[i])+" ";n+="\n"}return console.log(n),n}}},n="undefined"!=typeof exports&&null!==exports?exports:window;n.wordfind=r()}).call(this);