var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n};Math.randomMinMax=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};var lzlib;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isCopy=!1,e.dataTransfer=null,e.distance=new egret.Point,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){},e.prototype.enableDrag=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.dragObject=t,this.isCopy=e,this.dragObject.touchEnabled=!0,this.dragObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.dataTransfer=n},e.prototype.onTouchBegin=function(t){e.init(this.isCopy?this.cloneDragObject(this.dragObject):this.dragObject,this.isCopy,this.dataTransfer);var n=this.dragObject.parent.localToGlobal(this.dragObject.x,this.dragObject.y);e.dragingObject.x=n.x,e.dragingObject.y=n.y,null!=e.dragingObject.parent&&e.dragingObject.parent.removeChild(e.dragingObject),this.stage.addChild(e.dragingObject),this.distance.x=t.stageX-e.dragingObject.x,this.distance.y=t.stageY-e.dragingObject.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.cloneDragObject=function(t){if(t instanceof eui.Image)return this.cloneImage(t);if(t.clone)return t.clone();throw new Error("not supported dragObject Type")},e.prototype.cloneImage=function(t){var e=new eui.Image;return e.x=t.x,e.y=t.y,e.width=1.2*t.width,e.height=1.2*t.height,e.source=t.source,e.alpha=.8,e},e.prototype.onTouchMove=function(t){e.isDraging&&(e.dragingObject.x=t.stageX-this.distance.x,e.dragingObject.y=t.stageY-this.distance.y)},e.prototype.onTouchEnd=function(t){this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.isDraging&&(e.isCopy&&e.dragingObject.parent&&e.dragingObject.parent.removeChild(e.dragingObject),e.isAccepted||e.isCopy||(e.dragingObject.x=e.originalX,e.dragingObject.y=e.originalY,e.originalParent!=e.dragingObject.parent&&e.originalParent.addChild(e.dragingObject)),e.reset())},e.init=function(t,n,i){e.dragingObject=t,e.isCopy=n,e.dataTransfer=i,e.isDraging=!0,e.isAccepted=!1,e.originalX=t.x,e.originalY=t.y,e.originalParent=t.parent},e.reset=function(){e.isDraging=!1,e.dragingObject=null,e.isCopy=!1,e.isAccepted=!1,e.dataTransfer=null,e.originalX=0,e.originalY=0,e.originalParent=null},e.prototype.disableDrag=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.dragObject.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},e.isDraging=!1,e.dragingObject=null,e.isAccepted=!1,e.dataTransfer=null,e.isCopy=!1,e.originalParent=null,e.originalX=0,e.originalY=0,e}(egret.Sprite);t.Drag=e,__reflect(e.prototype,"lzlib.Drag")}(lzlib||(lzlib={}));var lzlib;!function(t){var e=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,!0,!0,r,o,a)||this;return s.data=i,s.dragObject=n,s}return __extends(e,t),e.DRAG_OVER="drag_enter",e.DRAG_OUT="drag_out",e.DROP="drag_drop",e}(egret.TouchEvent);t.LzDragEvent=e,__reflect(e.prototype,"lzlib.LzDragEvent")}(lzlib||(lzlib={}));var lzlib;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.enableDrop=function(t){this.dropObject=t,this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0,100)},n.prototype.disableDrop=function(){this.dropObject.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},n.prototype.onTouchEnd=function(e){t.Drag.isDraging&&this.dropObject.hitTestPoint(e.stageX,e.stageY)&&(t.Drag.isAccepted=!this.dropObject.dispatchEvent(new t.LzDragEvent(t.LzDragEvent.DROP,t.Drag.dragingObject,t.Drag.dataTransfer,e.stageX,e.stageY,e.touchPointID)))},n}(egret.Sprite);t.Drop=e,__reflect(e.prototype,"lzlib.Drop")}(lzlib||(lzlib={})),Array.prototype.shuffle=function(){for(var t=this,e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[n];t[n]=t[e],t[e]=i}return t};var egret;!function(t){t.MovieClip.prototype.playAsync=function(){var e=this;return new Promise(function(n,i){e.once(t.Event.COMPLETE,n,e),e.play(0)})}}(egret||(egret={})),String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)};var lzlib;!function(t){var e=function(){function t(){}return t.sleep=function(t){return void 0===t&&(t=0),new Promise(function(e){return setTimeout(e,t)})},t.playSound=function(t){var e=this;return new Promise(function(n,i){RES.getRes(t).play(0,1).once(egret.Event.SOUND_COMPLETE,n,e)})},t}();t.ThreadUtility=e,__reflect(e.prototype,"lzlib.ThreadUtility")}(lzlib||(lzlib={}));var egret;!function(t){var e;!function(e){e.TweenGroup.prototype.playOnceAsync=function(){var e=this;return new Promise(function(n,i){e.once(t.Event.COMPLETE,n,e),e.play(0)})}}(e=t.tween||(t.tween={}))}(egret||(egret={}));var lzlib;!function(t){var e=function(){function t(){}return t.playAnimation=function(t){for(var e in t.items)t.items[e].props={loop:!0};t.play(0)},t}();t.TweenGroupUtility=e,__reflect(e.prototype,"lzlib.TweenGroupUtility")}(lzlib||(lzlib={}));