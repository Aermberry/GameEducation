var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n};Math.randomMinMax=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};var lzlib;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isCopy=!1,t.dataTransfer=null,t.distance=new egret.Point,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(n,e),n.prototype.onAddToStage=function(t){},n.prototype.enableDrag=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.dragObject=t,this.isCopy=e,this.dragObject.touchEnabled=!0,this.dragObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.dataTransfer=n},n.prototype.onTouchBegin=function(t){n.init(this.isCopy?this.cloneDragObject(this.dragObject):this.dragObject,this.isCopy,this.dataTransfer);var e=this.dragObject.parent.localToGlobal(this.dragObject.x,this.dragObject.y);n.dragingObject.x=e.x,n.dragingObject.y=e.y,null!=n.dragingObject.parent&&n.dragingObject.parent.removeChild(n.dragingObject),this.stage.addChild(n.dragingObject),this.distance.x=t.stageX-n.dragingObject.x,this.distance.y=t.stageY-n.dragingObject.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},n.prototype.cloneDragObject=function(t){if(t instanceof eui.Image)return this.cloneImage(t);if(t.clone)return t.clone();throw new Error("not supported dragObject Type")},n.prototype.cloneImage=function(t){var e=new eui.Image;return e.x=t.x,e.y=t.y,e.width=1.2*t.width,e.height=1.2*t.height,e.source=t.source,e.alpha=.8,e},n.prototype.onTouchMove=function(t){n.isDraging&&(n.dragingObject.x=t.stageX-this.distance.x,n.dragingObject.y=t.stageY-this.distance.y)},n.prototype.onTouchEnd=function(e){this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),n.isDraging&&(n.isCopy&&n.dragingObject.parent&&n.dragingObject.parent.removeChild(n.dragingObject),n.isAccepted||(n.dragingObject.dispatchEvent(new t.LzDragEvent(t.LzDragEvent.DRAG_CANCEL,n.dragingObject,n.dataTransfer,e.stageX,e.stageY,e.touchPointID)),n.isCopy||(n.dragingObject.x=n.originalX,n.dragingObject.y=n.originalY,n.originalParent!=n.dragingObject.parent&&n.originalParent.addChild(n.dragingObject))),n.reset())},n.init=function(t,e,i){n.dragingObject=t,n.isCopy=e,n.dataTransfer=i,n.isDraging=!0,n.isAccepted=!1,n.originalX=t.x,n.originalY=t.y,n.originalParent=t.parent},n.reset=function(){n.isDraging=!1,n.dragingObject=null,n.isCopy=!1,n.isAccepted=!1,n.dataTransfer=null,n.originalX=0,n.originalY=0,n.originalParent=null},n.prototype.disableDrag=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.dragObject.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},n.isDraging=!1,n.dragingObject=null,n.isAccepted=!1,n.dataTransfer=null,n.isCopy=!1,n.originalParent=null,n.originalX=0,n.originalY=0,n}(egret.Sprite);t.Drag=e,__reflect(e.prototype,"lzlib.Drag")}(lzlib||(lzlib={}));var lzlib;!function(t){var e=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,!0,!0,r,o,a)||this;return s.data=i,s.dragObject=n,s}return __extends(e,t),e.DRAG_OVER="drag_enter",e.DRAG_OUT="drag_out",e.DRAG_CANCEL="drag_cancel",e.DROP="drag_drop",e}(egret.TouchEvent);t.LzDragEvent=e,__reflect(e.prototype,"lzlib.LzDragEvent")}(lzlib||(lzlib={}));var lzlib;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.enableDrop=function(t){this.dropObject=t,this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0,100)},n.prototype.disableDrop=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0)},n.prototype.onTouchEnd=function(e){t.Drag.isDraging&&this.dropObject.hitTestPoint(e.stageX,e.stageY)&&(t.Drag.isAccepted=!this.dropObject.dispatchEvent(new t.LzDragEvent(t.LzDragEvent.DROP,t.Drag.dragingObject,t.Drag.dataTransfer,e.stageX,e.stageY,e.touchPointID)))},n}(egret.Sprite);t.Drop=e,__reflect(e.prototype,"lzlib.Drop")}(lzlib||(lzlib={})),Array.prototype.shuffle=function(){for(var t=this,e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[n];t[n]=t[e],t[e]=i}return t};var egret;!function(t){t.MovieClip.prototype.playAsync=function(){var e=this;return new Promise(function(n,i){e.once(t.Event.COMPLETE,n,e),e.play(0)})}}(egret||(egret={}));var lzlib;!function(t){var e=function(){function t(){}return t.playSound=function(t){var e=this;return new Promise(function(n,i){RES.getRes(t).play(0,1).once(egret.Event.SOUND_COMPLETE,n,e)})},t}();t.SoundUtility=e,__reflect(e.prototype,"lzlib.SoundUtility")}(lzlib||(lzlib={})),String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)};var lzlib;!function(t){var e=function(){function t(){}return t.sleep=function(t){return void 0===t&&(t=0),new Promise(function(e){return setTimeout(e,t)})},t.playSound=function(t){var e=this;return new Promise(function(n,i){RES.getRes(t).play(0,1).once(egret.Event.SOUND_COMPLETE,n,e)})},t}();t.ThreadUtility=e,__reflect(e.prototype,"lzlib.ThreadUtility")}(lzlib||(lzlib={}));var egret;!function(t){var e;!function(e){e.TweenGroup.prototype.playOnceAsync=function(){var e=this;return new Promise(function(n,i){e.once(t.Event.COMPLETE,n,e),e.play(0)})},e.TweenGroup.prototype.playLoopAsync=function(){for(var t in this.items)this.items[t].props={loop:!0};this.play(0)}}(e=t.tween||(t.tween={}))}(egret||(egret={}));